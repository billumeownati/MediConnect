<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediConnect</title>
    <link rel="icon" type="image/x-icon" href="static/images/mediconnect_favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="static/css/base.css">
</head>

<body class="bg-light d-flex flex-column justify-content-center align-items-center vh-100">
    <div class="card border-0 shadow-lg rounded-4 p-5 text-center bg-white" style="max-width: 400px; width: 90%;">
        
        <div class="mb-4 d-flex justify-content-center">
            <img src="static/images/mediconnect_logo_transparent.png" alt="MediConnect Logo" width="100" height="100" class="me-2" style="object-fit: contain;">
        </div>

        <h1 class="text-primary fw-bold mb-1">MediConnect</h1>
        <p class="text-secondary small mb-5">Hospital Management System</p>

        <div class="d-flex align-items-center justify-content-center gap-2 mb-3">
            <div id="status-spinner" class="spinner-border text-primary spinner-border-sm" role="status"></div>
            <span id="status-text" class="text-secondary small">Establishing secure connection...</span>
        </div>

        <div class="progress bg-secondary bg-opacity-10 rounded-pill" style="height: 6px;">
            <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated bg-primary rounded-pill w-100" role="progressbar"></div>
        </div>

        <div class="mt-4 pt-2 border-top">
             <p class="text-muted extra-small mb-0" style="font-size: 12px;">
                <i class="bi bi-shield-lock-fill me-1"></i> SSL Encrypted Connection
            </p>
        </div>

    </div>

    <footer class="mt-5 text-body-secondary small text-center fixed-bottom bg-light border-top py-2">
        <p class="mb-0">
            <i class="bi bi-c-circle"></i> 2025 MediConnect | Made by Debayan
        </p>
    </footer>

    <script>
        const RENDER_BACKEND_URL = "https://active.mediconnect.debz.in/"; 

        async function checkServerStatus() {
            try {
                await fetch(RENDER_BACKEND_URL, { 
                    method: 'GET',
                    mode: 'no-cors' 
                });
                redirectToApp();
            } catch (error) {
                setTimeout(checkServerStatus, 2000);
            }
        }

        function redirectToApp() {
            const statusText = document.getElementById("status-text");
            const spinner = document.getElementById("status-spinner");
            const progressBar = document.getElementById("progress-bar");
            
            statusText.innerText = "Connected!";
            statusText.classList.replace("text-secondary", "text-success");
            
            spinner.classList.remove("spinner-border", "text-primary");
            spinner.classList.add("bi", "bi-check-circle-fill", "text-success");
            
            progressBar.classList.replace("bg-primary", "bg-success");
            progressBar.classList.remove("progress-bar-striped", "progress-bar-animated");

            window.location.href = RENDER_BACKEND_URL;
        }

        checkServerStatus();
    </script>
</body>
</html>